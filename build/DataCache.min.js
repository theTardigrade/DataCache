!(function(t,n,e,r,o,i,a,f,u,c,l,s){"use strict";function h(n){var e=this,r=[],f=this.get=(function(){for(var t=["data","metadata"],n=new l(t.length),e=0,o=n.length;e<o;++e)n[e]=t[e]+"Only";return function(e,o){var i=null;if(typeof e!==X)return i;var a=_(r,e);if(a===-1)return i;if(i=r[a],q()-i.metadata.updated>W)return p(e),null;if(o)for(var f=0,u=0,c=n.length;f<c;++f)if(o[n[f]]){if(u++)throw R("Options",n,C|x|S|I);i=i[t[f]]}return i}})();this.has=function(t){return typeof t===X&&_(r,t)>-1};var h=this.set=function(t,n){if(typeof X!==v&&L("keyType",typeof t),typeof t!==X)throw R("Key",X,G,o);if(null==n)throw R("Data",[d,m],S|x,o);var e=_(r,t);e===-1&&(e=r.length+1),e>=2*J&&(e=ft());var i={data:n},a=i.metadata={updated:q()};return a.created=r[e]&&r[e].metadata&&typeof r[e].metadata.created===g?r[e].metadata.created:a.updated,w.freeze&&F(i),r[e-1]=t,r[e]=i,U(r),i},p=this.unset=function(t){var n=null;if(typeof t!==X)return n;var e=_(r,t),o=r.length;if(e===-1)return n;if(o>2)for(var i,a=1;a>=0;--a)i=r[e-a],r[e-a]=r[o-a-1],r[o-a-1]=i;return n=r.pop(),r.pop(),U(r),n},A=this.collectGarbage=function(){if(W!==t.Infinity){var n=[],e=q(),o=r.length,i=u.min(o,2*j),a=0;o!==i&&(a=2*u.floor(u.random()*((o-i)/2)),i+=a);for(var f;a<i;a+=2)f=r[a+1],e-f.metadata.updated>W&&n.push(r[a]);for(a=0,i=n.length;a<i;++a)p(n[a])}};this.iterate=function(t,n){for(var e,o,i=0,a=r.length;i<a;i+=2)e=r[i],o=f(e,n),null!=o&&t(e,o)},this.map=function(t,n){for(var e,o,i,a=!n||!n.dataOnly,u=0,c=r.length;u<c;u+=2)e=r[u],o=f(e,n),null!=o&&(i=t(e,o),h(e,a?i.data:i))},this.filter=function(t,n){for(var e,o,i,a,u,c=0,l=r.length;c<l;)if(e=r[c],o=f(e,n),null==o||t(e,o))c+=2;else{for(var s=0;s<2;++s)i=c+s,a=l-2+s,u=r[i],r[i]=r[a],r[a]=u;l=r.length-=2;for(var h=c,p=l-2;h<p;h+=2)for(var y=0;y<2;++y)i=h+y,a=i+2,u=r[i],r[i]=r[a],r[a]=u}};var k=this.clear=function(){r=[]},T=function(t,n){var e=0,r="_"===n.charAt(e)?(++e,"_"):"";return r+=t+n.charAt(e).toUpperCase(),r+n.slice(e+1)},E=function(t,n){if(w.defineProperty)c.defineProperty(e,t,n);else for(var r,o=["g","s"],i=0,a=o.length;i<a;++i)r=o[i]+"et",typeof n[r]===y&&(e[T(r,t)]=n[r])},K=function(t){return w.defineProperty?e[t]:e[T("get",t)]()},L=function(t,n){return w.defineProperty?e[t]=n:e[T("set",t)](n)},X=null,B="keyType";E(B,{get:function(){return X},set:(function(){var t=V(B)(b,S,o);return function(n){if(n!==X||null===n){if(!b.includes(n))throw t;k(),X=n}}})()}),n&&typeof n[B]!==d&&L(B,n[B]);var H="size";E(H,{get:function(){return r.length/2},set:function(t){if(!(t>=K(H))){var n="capacity",e=function(t){L(n,t)},r=K(n);e(t),e(r)}}});var J=0,Q="capacity";E(Q,{get:function(){return J},set:(function(){var t=V(Q);return function(n){if(n!==J){if(typeof n!==g||a(n))throw t(g+" (excluding NaN)",G,o);if(n<0)throw t("negative",x,i);if(n<J)for(var e=u.min(J,K("size"))-n,f=0;f<e;++f){var c=ft();p(r[c-1])}J=u.min(u.round(n),z)}}})()}),L(Q,n&&typeof n[Q]!==d?n[Q]:z);var W=t.Infinity,Y="maxAge";E(Y,{get:function(){return W},set:(function(){var t=V(Y);return function(n){if(n!==W){if(typeof n!==g||a(n))throw t(g,G|M,o);if(n<0)throw t("negative",x,i);W=n}}})()}),n&&typeof n[Y]!==d&&L(Y,n[Y]);var Z=!1,$=N,tt=t.NaN,nt=0,et=function(){ot(),Z&&(A(),tt=q(),rt())},rt=function(){var n=a(tt)?0:q()-tt,e=u.max(0,$-n);nt=t.setTimeout(et,e)},ot=function(){nt&&t.clearTimeout(nt)},it="automaticGarbageCollection",at=it+"Interval";E(it,{get:function(){return Z},set:function(t){((Z=!!t)?rt:ot)()}}),n&&typeof n[it]!==d&&L(it,n[it]),E(at,{get:function(){return $},set:(function(){var t=V(at);return function(n){if($!==n){if(typeof n!==g||a(n))throw t(g,G|M,o);if(n<P)throw t(P,x|D,i);if(n>O)throw t(O,x|C,i);ot(),$=n,rt()}}})()}),n&&typeof n[at]!==d&&L(at,n[at]);var ft=function(){for(var n=1,e=s.MAX_VALUE||t.Infinity,o=n,i=r.length;o<i;o+=2)r[o].metadata.updated<e&&(e=r[o].metadata.updated,n=o);return n}}var p="object",y="function",v="string",g="number",d="undefined",m="null",w=(function(t){for(var n={},e=0,r=t.length;e<r;++e){var o=t[e];n[o.key]=typeof(o.object||c)[o.key]===(o.type||y)}return n})([{key:"assign"},{key:"defineProperty"},{key:"freeze"},{key:"now",object:f},{key:"includes",object:l.prototype},{key:"isArray",object:l}]),b=[v,g];if(!w.includes){var A=function(t){for(var n=0,e=this.length;n<e;++n)if(t===this[n])return!0;return!1};b.includes=A}var k=4294967295,z=u.floor(k/2),j=2560,N=15e3,P=500,O=36e5,T=1,E=1,x=2,S=4,C=8,D=16,I=32,G=64,M=128,_=function(t,n){for(var e=0,r=t.length-1;;){var o=2*u.floor((e+r)/4);if(t[o]===n)return o+1;if(e>=r)return-1;n<t[o]?r=o-2:n>t[o]&&(e=o+2)}},U=function(t){for(var n,e,r=0,o=t.length;r<o;r+=2){var i=t[r],a=t[r+1];for(n=r-2;n>-1&&!(t[n]<=i);n-=2)for(e=n;e<n+2;e++)t[e+2]=t[e];t[n+2]=i,t[n+3]=a}},F=function(t){for(var n in t)typeof t===p&&F(t[n]);c.freeze(t)},K=(function(){var t="isArray";return w[t]?l[t]:function(t){"[object Array]"===c.prototype.toString.call(t)}})(),L=function(t,n){var e="";if(K(t))for(var r,o=0,i=t.length;o<i;++o)r='"'+t[o].toString()+'"',e+=o<i-2?r+", ":o<i-1?r:" "+(n&T?"or":"and")+" "+r;return e},R=function(t,n,e,o){var i=(e&E?"Property ["+t+"]":t)+" "+(e&x?"cannot":"must")+" "+(e&I?"contain":"be")+" "+(e&C?"more":"")+(e&D?"less":"")+(e&C||e&D?" than ":"")+(e&G?"a ":"")+(e&S?"one of the following: "+L(n,T):n)+(e&M?" of milliseconds":"")+".",a=typeof o===y&&typeof o.name===v&&"Error"===o.name.slice(-5);return new(a?o:r)(i)},V=function(t){return function(n,e,r){return R(t,n,E|e,r)}},X=(function(){var t="assign";return w[t]?c[t]:function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];if(null==t)throw R("Target object",[d,m],S|x,o);for(var i,a=c(t),f=0,u=e.length;f<u;++f)if(null!=(i=e[f]))for(var l in i)c.prototype.hasOwnProperty.call(i,l)&&(a[l]=i[l]);return a}})(),q=(function(){var t="now";return w[t]?f[t]:function(){return(new f).getTime()}})(),B=(function(t){for(var n=[h,h.prototype],e=function(){return w.defineProperty},r=0,o=n.length;r<o;++r)n[r][t]=e;return e()})("supportsNativeGettersAndSetters"),H={getData:(function(t){return function(n){return this.get(n,t)}})({dataOnly:!0}),getMetadata:(function(t){return function(n){return this.get(n,t)}})({metadataOnly:!0}),isFull:function(){return B?this.size===this.capacity:this.getSize()===this.getCapacity()},isEmpty:function(){return 0===(B?this.size:this.getSize())}};X(h.prototype,H);var J="DataCache";typeof n===p&&typeof n.exports===p?n.exports=h:typeof e===y&&e.amd?e([J],[],h):t[J]=h})(null!=this.window?this.window:null!=this.global?this.global:this,this.module,this.define,Error,TypeError,RangeError,isNaN,Date,Math,Object,Array,Number);