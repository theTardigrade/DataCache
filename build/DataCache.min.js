!(function(t,e,n,r,i,o,a,f,u,c,l){"use strict";function s(e){var n=this,r=[];this.get=(function(){for(var t=["data","metadata"],e=new c(t.length),n=0,i=e.length;n<i;++n)e[n]=t[n]+"Only";return function(n,i){var o=null;if(typeof n!==A)return o;var a=S(r,n);if(a===-1)return o;if(o=r[a],R()-o.metadata.updated>L)return this.unset(n),null;if(i)for(var f=0,u=0,c=e.length;f<c;++f)if(i[e[f]]){if(u++)throw F("Options",e,T|I|O|_);o=o[t[f]]}return o}})(),this.has=function(t){return typeof t===A&&S(r,t)>-1},this.set=function(t,e){if(typeof A!==y&&b("keyType",typeof t),typeof t!==A)throw F("Key",A,G,i);if(null==e)throw F("Data",[v,d],O|I,i);var n=S(r,t);n===-1&&(n=r.length+1),n>=2*M&&(n=h("_oldestIndex"));var o={data:e},a=o.metadata={updated:R()};return a.created=r[n]&&r[n].metadata&&typeof r[n].metadata.created===g?r[n].metadata.created:a.updated,m.freeze&&D(o),r[n-1]=t,r[n]=o,C(r),o},this.unset=function(t){var e=null;if(typeof t!==A)return e;var n=S(r,t),i=r.length;if(n===-1)return e;if(i>2)for(var o,a=1;a>=0;--a)o=r[n-a],r[n-a]=r[i-a-1],r[i-a-1]=o;return e=r.pop(),r.pop(),C(r),e},this.collectGarbage=function(){if(L!==t.Infinity){for(var e,n=[],i=0,o=r.length;i<o;i+=2)e=r[i+1],R()-e.metadata.updated>L&&n.push(i);for(var a=0,f=n.length;a<f;++a)this.unset(r[n[a]])}},this.iterate=function(t,e){for(var n,i,o=0,a=r.length;o<a;o+=2)n=r[o],i=this.get(n,e),null!=i&&t(n,i)},this.map=function(t,e){for(var n,i,o,a=!e||!e.dataOnly,f=0,u=r.length;f<u;f+=2)n=r[f],i=this.get(n,e),null!=i&&(o=t(n,i),this.set(n,a?o.data:o))},this.filter=function(t,e){for(var n,i,o,a,f,u=0,c=r.length;u<c;)if(n=r[u],i=this.get(n,e),null==i||t(n,this.get(n,e)))u+=2;else{for(var l=0;l<2;++l)o=u+l,a=c-2+l,f=r[o],r[o]=r[a],r[a]=f;c=r.length-=2;for(var s=u,h=c-2;s<h;s+=2)for(var p=0;p<2;++p)o=s+p,a=o+2,f=r[o],r[o]=r[a],r[a]=f}},this.clear=function(){r=[]};var a=function(t,e){var n=0,r="_"===e.charAt(n)?(++n,"_"):"";return r+=t+e.charAt(n).toUpperCase(),r+e.slice(n+1)},s=function(t,e){if(m.defineProperty)u.defineProperty(n,t,e);else for(var r,i=["g","s"],o=0,f=i.length;o<f;++o)r=i[o]+"et",typeof e[r]===p&&(n[a(r,t)]=e[r])},h=function(t){return m.defineProperty?n[t]:n[a("get",t)]()},b=function(t,e){return m.defineProperty?n[t]=e:n[a("set",t)](e)},A=null,P="keyType";s(P,{get:function(){return A},set:(function(){var t=K(P)(w,O,i);return function(e){if(e!==A||null===e){if(!w.includes(e))throw t;n.clear(),A=e}}})()}),e&&typeof e[P]!==v&&b(P,e[P]);var x="size";s(x,{get:function(){return n.collectGarbage(),r.length/2},set:function(t){if(!(t>=h(x))){var e="capacity",n=function(t){b(e,t)},r=h(e);n(t),n(r)}}});var M=0,U="capacity";s(U,{get:function(){return M},set:(function(){var t=K(U);return function(e){if(e!==M){if(typeof e!==g||isNaN(e))throw t(g+" (excluding NaN)",G,i);if(e<0)throw t("negative",I,o);if(e<M)for(var a=f.min(M,h("size"))-e,u=0;u<a;++u){var c=h("_oldestIndex");n.unset(r[c-1])}M=f.min(f.round(e),k)}}})()}),b(U,e&&typeof e[U]!==v?e[U]:k);var L=t.Infinity,V="maxAge";s(V,{get:function(){return L},set:(function(){var t=K(V);return function(e){if(e!==L){if(typeof e!==g||isNaN(e))throw t(g+" of milliseconds",G,i);if(e<0)throw t("negative",I,o);L=e}}})()}),e&&typeof e[V]!==v&&b(V,e[V]);var X=!1,q=N,B=0,H=function(){Q(),X&&(n.collectGarbage(),J())},J=function(){B=t.setTimeout(H,q)},Q=function(){B&&t.clearTimeout(B)},W="automaticGarbageCollection",Y=W+"Interval";s(W,{get:function(){return X},set:function(t){((X=!!t)?J:Q)()}}),e&&typeof e[W]!==v&&b(W,e[W]),s(Y,{get:function(){return q},set:(function(){var t=K(Y);return function(e){if(q!==e){if(typeof e!==g||isNaN(e))throw t(g,G,i);if(e<z)throw t(z,I|E,o);if(e>j)throw t(j,I|T,o);q=e}}})()}),e&&typeof e[Y]!==v&&b(Y,e[Y]),s("_oldestIndex",{get:function(){for(var e=1,n=l.MAX_VALUE||t.Infinity,i=e,o=r.length;i<o;i+=2)r[i].metadata.updated<n&&(n=r[i].metadata.updated,e=i);return e}})}var h="object",p="function",y="string",g="number",v="undefined",d="null",m=(function(t){for(var e={},n=0,r=t.length;n<r;++n){var i=t[n];e[i.key]=typeof(i.object||u)[i.key]===(i.type||p)}return e})([{key:"assign"},{key:"defineProperty"},{key:"freeze"},{key:"now",object:a},{key:"includes",object:c.prototype},{key:"isArray",object:c}]),w=[y,g];if(!m.includes){var b=function(t){for(var e=0,n=this.length;e<n;++e)if(t===this[e])return!0;return!1};w.includes=b}var A=4294967295,k=f.floor(A/2),N=15e3,z=500,j=36e5,P=1,x=1,I=2,O=4,T=8,E=16,_=32,G=64,S=function(t,e){for(var n=0,r=t.length-1;;){var i=2*f.floor((n+r)/4);if(t[i]===e)return i+1;if(n>=r)return-1;e<t[i]?r=i-2:e>t[i]&&(n=i+2)}},C=function(t){for(var e,n,r=0,i=t.length;r<i;r+=2){var o=t[r],a=t[r+1];for(e=r-2;e>-1&&!(t[e]<=o);e-=2)for(n=e;n<e+2;n++)t[n+2]=t[n];t[e+2]=o,t[e+3]=a}},D=function(t){for(var e in t)typeof t===h&&D(t[e]);u.freeze(t)},M=(function(){var t="isArray";return m[t]?c[t]:function(t){"[object Array]"===u.prototype.toString.call(t)}})(),U=function(t,e){var n="";if(M(t))for(var r,i=0,o=t.length;i<o;++i)r='"'+t[i].toString()+'"',n+=i<o-2?r+", ":i<o-1?r:" "+(e&P?"or":"and")+" "+r;return n},F=function(t,e,n,i){var o=(n&x?"Property ["+t+"]":t)+" "+(n&I?"cannot":"must")+" "+(n&_?"contain":"be")+" "+(n&T?"more":"")+(n&E?"less":"")+(n&T||n&E?" than ":"")+(n&G?"a ":"")+(n&O?"one of the following: "+U(e,P):e)+".",a=typeof i===p&&typeof i.name===y&&"Error"===i.name.slice(-5);return new(a?i:r)(o)},K=function(t){return function(e,n,r){return F(t,e,x|n,r)}},L=(function(){var t="assign";return m[t]?u[t]:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(null==t)throw F("Target object",[v,d],O|I,i);for(var o,a=u(t),f=0,c=n.length;f<c;++f)if(null!=(o=n[f]))for(var l in o)u.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l]);return a}})(),R=(function(){var t="now",e=m[t];return function(n){var r=(e?a[t]:(new a).getTime)();return r}})(),V=(function(t){for(var e=[s,s.prototype],n=function(){return m.defineProperty},r=0,i=e.length;r<i;++r)e[r][t]=n;return n()})("supportsNativeGettersAndSetters"),X={getData:(function(t){return function(e){return this.get(e,t)}})({dataOnly:!0}),getMetadata:(function(t){return function(e){return this.get(e,t)}})({metadataOnly:!0}),isFull:function(){return V?this.size===this.capacity:this.getSize()===this.getCapacity()},isEmpty:function(){return 0===(V?this.size:this.getSize())}};L(s.prototype,X);var q="DataCache";typeof e===h&&typeof e.exports===h?e.exports=s:typeof n===p&&n.amd?n([q],[],s):t[q]=s})(null!=this.window?this.window:null!=this.global?this.global:this,this.module,this.define,Error,TypeError,RangeError,Date,Math,Object,Array,Number);