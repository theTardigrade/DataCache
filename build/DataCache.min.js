!(function(){var e="object",t="function",r="string",n="number",i="undefined";!(function(a,o,f,u,s,y,p,c){"use strict";function d(o){var d=this,h=this._debugCache=[];this.get=function(e,t){var r=null;if(typeof e!==b("keyType"))return r;var n=k(h,e);if(n===-1)return r;if(r=h[n],t){var i=0;if(t.metadataOnly){var a={};++i;for(var o in r)"data"!==o&&(a[o]=r[o]);return a}if(t.dataOnly){if(i)throw new f('The "dataOnly" and "metadataOnly" options are mutually contradictory.');r=r.data}}return r},this.has=function(e){var t=b("keyType");return typeof e===t&&k(h,e)>-1},this.set=function(t,n){var i=b("keyType");if(typeof i!==r&&z("keyType",i=typeof t),typeof t!==i)throw new u("Key must be a "+i+".");var a=k(h,t);a===-1&&(a=h.length+1),a>=2*b("capacity")&&(a=b("_oldestIndex")),typeof n===e&&w.freeze&&p.freeze(n);var o={data:n,updated:w.now?s.now():(new s).getTime()};return o.created=h[a]&&h[a].created?h[a].created:o.updated,h[a-1]=t,h[a]=o,m(h),o},this.unset=function(e){if(typeof e!==b("keyType"))return!1;var t=k(h,e),r=h.length;if(t===-1)return!1;if(r>2)for(var n,i=1;i>=0;--i)n=h[t-i],h[t-i]=h[r-i-1],h[r-i-1]=n;for(var a=0;a<2;++a)h.pop();return!m(h)},this.iterate=function(e,t){for(var r=b("keyType"),n=this,i=function(e){return n.get(e,t)},a=0,o=h.length;a<o;a+=2){var f=h[a];typeof f===r&&e(f,i(f))}},this.clear=function(){return!!(h=[])};var v=function(e,t){var r=0,n="_"===t.charAt(r)?(++r,"_"):"";return n+=e+t.charAt(r).toUpperCase(),n+t.slice(r+1)},T=function(e,r){if(w.defineProperty)p.defineProperty(d,e,r);else for(var n,i=["g","s"],a=0,o=i.length;a<o;++a)n=i[a]+"et",typeof r[n]===t&&(d[v(n,e)]=r[n])},b=function(e){return w.defineProperty?d[e]:d[v("get",e)]()},z=function(e,t){return w.defineProperty?d[e]=t:d[v("set",e)](t)},O=null;T("keyType",{get:function(){return O},set:(function(){for(var e,t="The only allowable key types are ",r=0,n=l.length;r<n;++r)e='"'+l[r]+'"',t+=r<n-2?e+", ":r<n-1?e:" and "+e+".";return function(e){var r=(function(){for(var t=0,r=l.length;t<r;++t)if(e===l[t])return!0;return!1})();if(e!==O){if(!r)throw new u(t);O=e.toLowerCase()}}})()}),o&&typeof o.keyType!==i&&z("keyType",o.keyType),T("size",{get:function(){return h.length/2}});var N=0;T("capacity",{get:function(){return N},set:function(e){if(typeof e!==n||e<0||e===N)return!1;if(e<N)for(var t=0,r=y.min(d.size,e);t<r;t+=2){var i=d._getOldestIndex();d.unset(h[i-1])}var a=e===n||isNaN(e)?e:parseInt(e,10);if(a=y.min(a,g),isNaN(a))throw new u("Suggested capacity cannot be parsed.");return N=y.max(a,0),!0}}),z("capacity",o&&typeof o.capacity!==i?o.capacity:g),T("_oldestIndex",{get:function(){for(var e=1,t=c.MAX_VALUE||a.Infinity,r=e,n=h.length;r<n;r+=2)h[r].updated<t&&(t=h[r].updated,e=r);return e}})}var h=typeof o===e&&typeof o.exports===e&&typeof process===e&&typeof process.versions==e&&!isNaN(parseFloat(process.versions.node,10)),l=[r,n],v=4294967295,g=y.floor(v)/2,w=(function(e){for(var r={},n=0,i=e.length;n<i;++n){var a=e[n];r[a.key]=typeof(a.object||p)[a.key]===(a.type||t)}return r})([{key:"assign"},{key:"defineProperty"},{key:"freeze"},{key:"now",object:s}]),k=function(e,t){for(var r=0,n=e.length-1;;){var i=2*y.floor((r+n)/4);if(e[i]===t)return i+1;if(r>=n)return-1;t<e[i]?n=i-2:t>e[i]&&(r=i+2)}},m=function(e){for(var t,r,n=0,i=e.length;n<i;n+=2){var a=e[n],o=e[n+1];for(t=n-2;t>-1&&!(e[t]<=a);t-=2)for(r=t;r<t+2;r++)e[r+2]=e[r];e[t+2]=a,e[t+3]=o}};!(function(e){if(w.assign)p.assign(d.prototype,e);else for(var t in e)d.prototype[t]=e[t]})({getData:(function(e){return function(t){return this.get(t,e)}})({dataOnly:!0}),getMetadata:(function(e){return function(t){return this.get(t,e)}})({metadataOnly:!0}),map:function(e,t){var r=this;this.iterate((function(n,a){var o=e(n,a);t&&t.dataOnly||(o=o.data),typeof o!==i&&r.set(n,o)}),t)},filter:function(e,t){var r=[];this.iterate((function(t,n){e(t,n)||r.push(t)}),t);for(var n=0,i=r.length;n<i;++n)this.unset(r[n])},isFull:function(){return w.defineProperty?this.size===this.capacity:this.getSize()===this.getCapacity()},isEmpty:function(){return 0===(w.defineProperty?this.size:this.getSize())},supportsNativeGettersAndSetters:function(){return w.defineProperty}}),h?o.exports=d:a.DataCache=d})(typeof window===e?window:typeof global===e?global:this,this.module,Error,TypeError,Date,Math,Object,Number)})();