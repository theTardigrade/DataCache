!(function(t,e,n,r,i,o,a,f,u,c,l,s){"use strict";function h(e){var n=this,r=[];this.get=(function(){for(var t=["data","metadata"],e=new l(t.length),n=0,i=e.length;n<i;++n)e[n]=t[n]+"Only";return function(n,i){var o=null;if(typeof n!==k)return o;var a=D(r,n);if(a===-1)return o;if(o=r[a],X()-o.metadata.updated>V)return this.unset(n),null;if(i)for(var f=0,u=0,c=e.length;f<c;++f)if(i[e[f]]){if(u++)throw L("Options",e,N|T|E|G);o=o[t[f]]}return o}})(),this.has=function(t){return typeof t===k&&D(r,t)>-1},this.set=function(t,e){if(typeof k!==g&&A("keyType",typeof t),typeof t!==k)throw L("Key",k,S,i);if(null==e)throw L("Data",[v,m],E|T,i);var n=D(r,t);n===-1&&(n=r.length+1),n>=2*F&&(n=p("_oldestIndex"));var o={data:e},a=o.metadata={updated:X()};return a.created=r[n]&&r[n].metadata&&typeof r[n].metadata.created===d?r[n].metadata.created:a.updated,w.freeze&&U(o),r[n-1]=t,r[n]=o,M(r),o},this.unset=function(t){var e=null;if(typeof t!==k)return e;var n=D(r,t),i=r.length;if(n===-1)return e;if(i>2)for(var o,a=1;a>=0;--a)o=r[n-a],r[n-a]=r[i-a-1],r[i-a-1]=o;return e=r.pop(),r.pop(),M(r),e},this.collectGarbage=function(){if(V!==t.Infinity){for(var e,n=[],i=0,o=r.length;i<o;i+=2)e=r[i+1],X()-e.metadata.updated>V&&n.push(i);for(var a=0,f=n.length;a<f;++a)this.unset(r[n[a]])}},this.iterate=function(t,e){for(var n,i,o=0,a=r.length;o<a;o+=2)n=r[o],i=this.get(n,e),null!=i&&t(n,i)},this.map=function(t,e){for(var n,i,o,a=!e||!e.dataOnly,f=0,u=r.length;f<u;f+=2)n=r[f],i=this.get(n,e),null!=i&&(o=t(n,i),this.set(n,a?o.data:o))},this.filter=function(t,e){for(var n,i,o,a,f,u=0,c=r.length;u<c;)if(n=r[u],i=this.get(n,e),null==i||t(n,this.get(n,e)))u+=2;else{for(var l=0;l<2;++l)o=u+l,a=c-2+l,f=r[o],r[o]=r[a],r[a]=f;c=r.length-=2;for(var s=u,h=c-2;s<h;s+=2)for(var p=0;p<2;++p)o=s+p,a=o+2,f=r[o],r[o]=r[a],r[a]=f}},this.clear=function(){r=[]};var f=function(t,e){var n=0,r="_"===e.charAt(n)?(++n,"_"):"";return r+=t+e.charAt(n).toUpperCase(),r+e.slice(n+1)},h=function(t,e){if(w.defineProperty)c.defineProperty(n,t,e);else for(var r,i=["g","s"],o=0,a=i.length;o<a;++o)r=i[o]+"et",typeof e[r]===y&&(n[f(r,t)]=e[r])},p=function(t){return w.defineProperty?n[t]:n[f("get",t)]()},A=function(t,e){return w.defineProperty?n[t]=e:n[f("set",t)](e)},k=null,I="keyType";h(I,{get:function(){return k},set:(function(){var t=R(I)(b,E,i);return function(e){if(e!==k||null===e){if(!b.includes(e))throw t;n.clear(),k=e}}})()}),e&&typeof e[I]!==v&&A(I,e[I]);var O="size";h(O,{get:function(){return n.collectGarbage(),r.length/2},set:function(t){if(!(t>=p(O))){var e="capacity",n=function(t){A(e,t)},r=p(e);n(t),n(r)}}});var F=0,K="capacity";h(K,{get:function(){return F},set:(function(){var t=R(K);return function(e){if(e!==F){if(typeof e!==d||a(e))throw t(d+" (excluding NaN)",S,i);if(e<0)throw t("negative",T,o);if(e<F)for(var f=u.min(F,p("size"))-e,c=0;c<f;++c){var l=p("_oldestIndex");n.unset(r[l-1])}F=u.min(u.round(e),z)}}})()}),A(K,e&&typeof e[K]!==v?e[K]:z);var V=t.Infinity,q="maxAge";h(q,{get:function(){return V},set:(function(){var t=R(q);return function(e){if(e!==V){if(typeof e!==d||a(e))throw t(d,S|C,i);if(e<0)throw t("negative",T,o);V=e}}})()}),e&&typeof e[q]!==v&&A(q,e[q]);var B=!1,H=j,J=0,Q=function(){Y(),B&&(n.collectGarbage(),W())},W=function(){J=t.setTimeout(Q,H)},Y=function(){J&&t.clearTimeout(J)},Z="automaticGarbageCollection",$=Z+"Interval";h(Z,{get:function(){return B},set:function(t){((B=!!t)?W:Y)()}}),e&&typeof e[Z]!==v&&A(Z,e[Z]),h($,{get:function(){return H},set:(function(){var t=R($);return function(e){if(H!==e){if(typeof e!==d||a(e))throw t(d,S|C,i);if(e<P)throw t(P,T|_,o);if(e>x)throw t(x,T|N,o);H=e}}})()}),e&&typeof e[$]!==v&&A($,e[$]),h("_oldestIndex",{get:function(){for(var e=1,n=s.MAX_VALUE||t.Infinity,i=e,o=r.length;i<o;i+=2)r[i].metadata.updated<n&&(n=r[i].metadata.updated,e=i);return e}})}var p="object",y="function",g="string",d="number",v="undefined",m="null",w=(function(t){for(var e={},n=0,r=t.length;n<r;++n){var i=t[n];e[i.key]=typeof(i.object||c)[i.key]===(i.type||y)}return e})([{key:"assign"},{key:"defineProperty"},{key:"freeze"},{key:"now",object:f},{key:"includes",object:l.prototype},{key:"isArray",object:l}]),b=[g,d];if(!w.includes){var A=function(t){for(var e=0,n=this.length;e<n;++e)if(t===this[e])return!0;return!1};b.includes=A}var k=4294967295,z=u.floor(k/2),j=15e3,P=500,x=36e5,I=1,O=1,T=2,E=4,N=8,_=16,G=32,S=64,C=128,D=function(t,e){for(var n=0,r=t.length-1;;){var i=2*u.floor((n+r)/4);if(t[i]===e)return i+1;if(n>=r)return-1;e<t[i]?r=i-2:e>t[i]&&(n=i+2)}},M=function(t){for(var e,n,r=0,i=t.length;r<i;r+=2){var o=t[r],a=t[r+1];for(e=r-2;e>-1&&!(t[e]<=o);e-=2)for(n=e;n<e+2;n++)t[n+2]=t[n];t[e+2]=o,t[e+3]=a}},U=function(t){for(var e in t)typeof t===p&&U(t[e]);c.freeze(t)},F=(function(){var t="isArray";return w[t]?l[t]:function(t){"[object Array]"===c.prototype.toString.call(t)}})(),K=function(t,e){var n="";if(F(t))for(var r,i=0,o=t.length;i<o;++i)r='"'+t[i].toString()+'"',n+=i<o-2?r+", ":i<o-1?r:" "+(e&I?"or":"and")+" "+r;return n},L=function(t,e,n,i){var o=(n&O?"Property ["+t+"]":t)+" "+(n&T?"cannot":"must")+" "+(n&G?"contain":"be")+" "+(n&N?"more":"")+(n&_?"less":"")+(n&N||n&_?" than ":"")+(n&S?"a ":"")+(n&E?"one of the following: "+K(e,I):e)+(n&C?" of milliseconds":"")+".",a=typeof i===y&&typeof i.name===g&&"Error"===i.name.slice(-5);return new(a?i:r)(o)},R=function(t){return function(e,n,r){return L(t,e,O|n,r)}},V=(function(){var t="assign";return w[t]?c[t]:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(null==t)throw L("Target object",[v,m],E|T,i);for(var o,a=c(t),f=0,u=n.length;f<u;++f)if(null!=(o=n[f]))for(var l in o)c.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l]);return a}})(),X=(function(){var t="now";return w[t]?f[t]:function(){return(new f).getTime()}})(),q=(function(t){for(var e=[h,h.prototype],n=function(){return w.defineProperty},r=0,i=e.length;r<i;++r)e[r][t]=n;return n()})("supportsNativeGettersAndSetters"),B={getData:(function(t){return function(e){return this.get(e,t)}})({dataOnly:!0}),getMetadata:(function(t){return function(e){return this.get(e,t)}})({metadataOnly:!0}),isFull:function(){return q?this.size===this.capacity:this.getSize()===this.getCapacity()},isEmpty:function(){return 0===(q?this.size:this.getSize())}};V(h.prototype,B);var H="DataCache";typeof e===p&&typeof e.exports===p?e.exports=h:typeof n===y&&n.amd?n([H],[],h):t[H]=h})(null!=this.window?this.window:null!=this.global?this.global:this,this.module,this.define,Error,TypeError,RangeError,isNaN,Date,Math,Object,Array,Number);