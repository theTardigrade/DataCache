!(function(t,e,n,r,i,o,a,f,u,c,l){"use strict";function s(e){var n=this,r=[];this.get=(function(){for(var t=["data","metadata"],e=new c(t.length),n=0,i=e.length;n<i;++n)e[n]=t[n]+"Only";return function(n,i){var o=null;if(typeof n!==A)return o;var a=I(r,n);if(a===-1)return o;if(o=r[a],U()-o.metadata.updated>F)return this.unset(n),null;if(i)for(var f=0,u=0,c=e.length;f<c;++f)if(i[e[f]]){if(u++)throw D("Options",e,O|P|x|T);o=o[t[f]]}return o}})(),this.has=function(t){return typeof t===A&&I(r,t)>-1},this.set=function(t,e){if(typeof A!==y&&b("keyType",typeof t),typeof t!==A)throw D("Key",A,E,i);if(null==e)throw D("Data",[d,v],x|P,i);var n=I(r,t);n===-1&&(n=r.length+1),n>=2*C&&(n=h("_oldestIndex"));var o={data:e},a=o.metadata={updated:U()};return a.created=r[n]&&r[n].metadata&&typeof r[n].metadata.created===g?r[n].metadata.created:a.updated,m.freeze&&G(o),r[n-1]=t,r[n]=o,_(r),o},this.unset=function(t){var e=null;if(typeof t!==A)return e;var n=I(r,t),i=r.length;if(n===-1)return e;if(i>2)for(var o,a=1;a>=0;--a)o=r[n-a],r[n-a]=r[i-a-1],r[i-a-1]=o;return e=r.pop(),r.pop(),_(r),e},this.collectGarbage=function(){if(F!==t.Infinity)for(var e=1,n=r.length;e<n;e+=2)U()-r[e].metadata.updated>F&&this.unset(r[e-1])},this.iterate=function(t,e){for(var n,i,o=0,a=r.length;o<a;o+=2)n=r[o],i=this.get(n,e),null!==i&&t(n,i)},this.map=function(t,e){for(var n,i,o,a=!e||!e.dataOnly,f=0,u=r.length;f<u;f+=2)n=r[f],i=this.get(n,e),null!==i&&(o=t(n,i),this.set(n,a?o.data:o))},this.filter=function(t,e){for(var n,i,o,a,f,u=0,c=r.length;u<c;)if(n=r[u],i=this.get(n,e),null===i||t(n,this.get(n,e)))u+=2;else{for(var l=0;l<2;++l)o=u+l,a=c-2+l,f=r[o],r[o]=r[a],r[a]=f;c=r.length-=2;for(var s=u,h=c-2;s<h;s+=2)for(var p=0;p<2;++p)o=s+p,a=o+2,f=r[o],r[o]=r[a],r[a]=f}},this.clear=function(){r=[]};var a=function(t,e){var n=0,r="_"===e.charAt(n)?(++n,"_"):"";return r+=t+e.charAt(n).toUpperCase(),r+e.slice(n+1)},s=function(t,e){if(m.defineProperty)u.defineProperty(n,t,e);else for(var r,i=["g","s"],o=0,f=i.length;o<f;++o)r=i[o]+"et",typeof e[r]===p&&(n[a(r,t)]=e[r])},h=function(t){return m.defineProperty?n[t]:n[a("get",t)]()},b=function(t,e){return m.defineProperty?n[t]=e:n[a("set",t)](e)},A=null,j="keyType";s(j,{get:function(){return A},set:(function(){var t=D(j,w,x|N,i);return function(e){if(e!==A||null===e){if(!w.includes(e))throw t;n.clear(),A=e}}})()}),e&&typeof e[j]!==d&&b(j,e[j]);var S="size";s(S,{get:function(){return n.collectGarbage(),r.length/2},set:function(t){if(!(t>=h(S))){var e="capacity",n=function(t){b(e,t)},r=h(e);n(t),n(r)}}});var C=0,M="capacity";s(M,{get:function(){return C},set:(function(){var t=function(t,e,n){return D(M,t,N|e,n)};return function(e){if(e!==C){if(typeof e!==g||isNaN(e))throw t(g+" (excluding NaN)",E,i);if(e<0)throw t("negative",P,o);if(e<C)for(var a=f.min(C,h("size"))-e,u=0;u<a;++u){var c=h("_oldestIndex");n.unset(r[c-1])}C=f.min(f.round(e),k)}}})()}),b(M,e&&typeof e[M]!==d?e[M]:k);var F=t.Infinity,K="maxAge";s(K,{get:function(){return F},set:(function(){var t=function(t,e,n){return D(K,t,N|e,n)};return function(e){if(e!==F){if(typeof e!==g||isNaN(e))throw t(g+" of milliseconds",E,i);if(e<0)throw t("negative",P,o);F=e}}})()}),e&&typeof e[K]!==d&&b(K,e[K]);var L=!1,R=0,V=function(){q(),L&&(n.collectGarbage(),X())},X=function(){R=t.setTimeout(V,z)},q=function(){R&&t.clearTimeout(R)},B="automaticGarbageCollection";s(B,{get:function(){return L},set:function(t){((L=!!t)?X:q)()}}),e&&typeof e[B]!==d&&b(B,e[B]),s("_oldestIndex",{get:function(){for(var e=1,n=l.MAX_VALUE||t.Infinity,i=e,o=r.length;i<o;i+=2)r[i].metadata.updated<n&&(n=r[i].metadata.updated,e=i);return e}})}var h="object",p="function",y="string",g="number",d="undefined",v="null",m=(function(t){for(var e={},n=0,r=t.length;n<r;++n){var i=t[n];e[i.key]=typeof(i.object||u)[i.key]===(i.type||p)}return e})([{key:"assign"},{key:"defineProperty"},{key:"freeze"},{key:"now",object:a},{key:"includes",object:c.prototype},{key:"isArray",object:c}]),w=[y,g];if(!m.includes){var b=function(t){for(var e=0,n=this.length;e<n;++e)if(t===this[e])return!0;return!1};w.includes=b}var A=4294967295,k=f.floor(A/2),z=16384,j=1,N=1,P=2,x=4,O=8,T=16,E=32,I=function(t,e){for(var n=0,r=t.length-1;;){var i=2*f.floor((n+r)/4);if(t[i]===e)return i+1;if(n>=r)return-1;e<t[i]?r=i-2:e>t[i]&&(n=i+2)}},_=function(t){for(var e,n,r=0,i=t.length;r<i;r+=2){var o=t[r],a=t[r+1];for(e=r-2;e>-1&&!(t[e]<=o);e-=2)for(n=e;n<e+2;n++)t[n+2]=t[n];t[e+2]=o,t[e+3]=a}},G=function(t){for(var e in t)typeof t===h&&G(t[e]);u.freeze(t)},S=(function(){var t="isArray";return m[t]?c[t]:function(t){"[object Array]"===u.prototype.toString.call(t)}})(),C=function(t,e){var n="";if(S(t))for(var r,i=0,o=t.length;i<o;++i)r='"'+t[i].toString()+'"',n+=i<o-2?r+", ":i<o-1?r:" "+(e&j?"or":"and")+" "+r;return n},D=function(t,e,n,i){var o=(n&N?"Property ["+t+"]":t)+" "+(n&P?"cannot":"must")+" "+(n&T?"contain":"be")+" "+(n&O?"more than ":"")+(n&E?"a ":"")+(n&x?"one of the following: "+C(e,j):e)+".",a=typeof i===p&&typeof i.name===y&&"Error"===i.name.slice(-5);return new(a?i:r)(o)},M=(function(){var t="assign";return m[t]?u[t]:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(null==t)throw D("Target object",[d,v],x|P,i);for(var o,a=u(t),f=0,c=n.length;f<c;++f)if(null!=(o=n[f]))for(var l in o)u.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l]);return a}})(),U=(function(){var t="now",e=m[t];return function(n){var r=(e?a[t]:(new a).getTime)();return r}})(),F=(function(t){for(var e=[s,s.prototype],n=function(){return m.defineProperty},r=0,i=e.length;r<i;++r)e[r][t]=n;return n()})("supportsNativeGettersAndSetters"),K={getData:(function(t){return function(e){return this.get(e,t)}})({dataOnly:!0}),getMetadata:(function(t){return function(e){return this.get(e,t)}})({metadataOnly:!0}),isFull:function(){return F?this.size===this.capacity:this.getSize()===this.getCapacity()},isEmpty:function(){return 0===(F?this.size:this.getSize())}};M(s.prototype,K);var L="DataCache";typeof e===h&&typeof e.exports===h?e.exports=s:typeof n===p&&n.amd?n([L],[],s):t[L]=s})(null!=this.window?this.window:null!=this.global?this.global:this,this.module,this.define,Error,TypeError,RangeError,Date,Math,Object,Array,Number);