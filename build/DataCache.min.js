!(function(t,e,n,r,o,i,a,f,u,c,l,s){"use strict";function h(e){var n=this,r=[],f=this.get=(function(){for(var t=["data","metadata"],e=new l(t.length),n=0,o=e.length;n<o;++n)e[n]=t[n]+"Only";return function(n,o){var i=null;if(typeof n!==L)return i;var a=_(r,n);if(a===-1)return i;if(i=r[a],q()-i.metadata.updated>Q)return p(n),null;if(o)for(var f=0,u=0,c=e.length;f<c;++f)if(o[e[f]]){if(u++)throw R("Options",e,C|S|x|I);i=i[t[f]]}return i}})();this.has=function(t){return typeof t===L&&_(r,t)>-1};var h=this.set=function(t,e){if(typeof L!==v&&K("keyType",typeof t),typeof t!==L)throw R("Key",L,G,o);if(null==e)throw R("Data",[d,m],x|S,o);var n=_(r,t);n===-1&&(n=r.length+1),n>=2*H&&(n=at());var i={data:e},a=i.metadata={updated:q()};return a.created=r[n]&&r[n].metadata&&typeof r[n].metadata.created===g?r[n].metadata.created:a.updated,w.freeze&&F(i),r[n-1]=t,r[n]=i,U(r),i},p=this.unset=function(t){var e=null;if(typeof t!==L)return e;var n=_(r,t),o=r.length;if(n===-1)return e;if(o>2)for(var i,a=1;a>=0;--a)i=r[n-a],r[n-a]=r[o-a-1],r[o-a-1]=i;return e=r.pop(),r.pop(),U(r),e},A=this.collectGarbage=function(){if(Q!==t.Infinity){var e=[],n=q(),o=r.length,i=u.min(o,2*j),a=0;o!==i&&(a=2*u.floor(u.random()*((o-i)/2)),i+=a);for(var f;a<i;a+=2)f=r[a+1],n-f.metadata.updated>Q&&e.push(r[a]);for(a=0,i=e.length;a<i;++a)p(e[a])}};this.iterate=function(t,e){for(var n,o,i=0,a=r.length;i<a;i+=2)n=r[i],o=f(n,e),null!=o&&t(n,o)},this.map=function(t,e){for(var n,o,i,a=!e||!e.dataOnly,u=0,c=r.length;u<c;u+=2)n=r[u],o=f(n,e),null!=o&&(i=t(n,o),h(n,a?i.data:i))},this.filter=function(t,e){for(var n,o,i,a,u,c=0,l=r.length;c<l;)if(n=r[c],o=f(n,e),null==o||t(n,o))c+=2;else{for(var s=0;s<2;++s)i=c+s,a=l-2+s,u=r[i],r[i]=r[a],r[a]=u;l=r.length-=2;for(var h=c,p=l-2;h<p;h+=2)for(var y=0;y<2;++y)i=h+y,a=i+2,u=r[i],r[i]=r[a],r[a]=u}},this.clear=function(){r=[]};var k=function(t,e){var n=0,r="_"===e.charAt(n)?(++n,"_"):"";return r+=t+e.charAt(n).toUpperCase(),r+e.slice(n+1)},T=function(t,e){if(w.defineProperty)c.defineProperty(n,t,e);else for(var r,o=["g","s"],i=0,a=o.length;i<a;++i)r=o[i]+"et",typeof e[r]===y&&(n[k(r,t)]=e[r])},E=function(t){return w.defineProperty?n[t]:n[k("get",t)]()},K=function(t,e){return w.defineProperty?n[t]=e:n[k("set",t)](e)},L=null,X="keyType";T(X,{get:function(){return L},set:(function(){var t=V(X)(b,x,o);return function(e){if(e!==L||null===e){if(!b.includes(e))throw t;n.clear(),L=e}}})()}),e&&typeof e[X]!==d&&K(X,e[X]);var B="size";T(B,{get:function(){return r.length/2},set:function(t){if(!(t>=E(B))){var e="capacity",n=function(t){K(e,t)},r=E(e);n(t),n(r)}}});var H=0,J="capacity";T(J,{get:function(){return H},set:(function(){var t=V(J);return function(e){if(e!==H){if(typeof e!==g||a(e))throw t(g+" (excluding NaN)",G,o);if(e<0)throw t("negative",S,i);if(e<H)for(var n=u.min(H,E("size"))-e,f=0;f<n;++f){var c=at();p(r[c-1])}H=u.min(u.round(e),z)}}})()}),K(J,e&&typeof e[J]!==d?e[J]:z);var Q=t.Infinity,W="maxAge";T(W,{get:function(){return Q},set:(function(){var t=V(W);return function(e){if(e!==Q){if(typeof e!==g||a(e))throw t(g,G|M,o);if(e<0)throw t("negative",S,i);Q=e}}})()}),e&&typeof e[W]!==d&&K(W,e[W]);var Y=!1,Z=N,$=t.NaN,tt=0,et=function(){rt(),Y&&(A(),$=q(),nt())},nt=function(){var e=a($)?0:q()-$,n=e<Z?Z-e:Z;tt=t.setTimeout(et,n)},rt=function(){tt&&t.clearTimeout(tt)},ot="automaticGarbageCollection",it=ot+"Interval";T(ot,{get:function(){return Y},set:function(t){((Y=!!t)?nt:rt)()}}),e&&typeof e[ot]!==d&&K(ot,e[ot]),T(it,{get:function(){return Z},set:(function(){var t=V(it);return function(e){if(Z!==e){if(typeof e!==g||a(e))throw t(g,G|M,o);if(e<P)throw t(P,S|D,i);if(e>O)throw t(O,S|C,i);rt(),Z=e,nt()}}})()}),e&&typeof e[it]!==d&&K(it,e[it]);var at=function(){for(var e=1,n=s.MAX_VALUE||t.Infinity,o=e,i=r.length;o<i;o+=2)r[o].metadata.updated<n&&(n=r[o].metadata.updated,e=o);return e}}var p="object",y="function",v="string",g="number",d="undefined",m="null",w=(function(t){for(var e={},n=0,r=t.length;n<r;++n){var o=t[n];e[o.key]=typeof(o.object||c)[o.key]===(o.type||y)}return e})([{key:"assign"},{key:"defineProperty"},{key:"freeze"},{key:"now",object:f},{key:"includes",object:l.prototype},{key:"isArray",object:l}]),b=[v,g];if(!w.includes){var A=function(t){for(var e=0,n=this.length;e<n;++e)if(t===this[e])return!0;return!1};b.includes=A}var k=4294967295,z=u.floor(k/2),j=2560,N=15e3,P=500,O=36e5,T=1,E=1,S=2,x=4,C=8,D=16,I=32,G=64,M=128,_=function(t,e){for(var n=0,r=t.length-1;;){var o=2*u.floor((n+r)/4);if(t[o]===e)return o+1;if(n>=r)return-1;e<t[o]?r=o-2:e>t[o]&&(n=o+2)}},U=function(t){for(var e,n,r=0,o=t.length;r<o;r+=2){var i=t[r],a=t[r+1];for(e=r-2;e>-1&&!(t[e]<=i);e-=2)for(n=e;n<e+2;n++)t[n+2]=t[n];t[e+2]=i,t[e+3]=a}},F=function(t){for(var e in t)typeof t===p&&F(t[e]);c.freeze(t)},K=(function(){var t="isArray";return w[t]?l[t]:function(t){"[object Array]"===c.prototype.toString.call(t)}})(),L=function(t,e){var n="";if(K(t))for(var r,o=0,i=t.length;o<i;++o)r='"'+t[o].toString()+'"',n+=o<i-2?r+", ":o<i-1?r:" "+(e&T?"or":"and")+" "+r;return n},R=function(t,e,n,o){var i=(n&E?"Property ["+t+"]":t)+" "+(n&S?"cannot":"must")+" "+(n&I?"contain":"be")+" "+(n&C?"more":"")+(n&D?"less":"")+(n&C||n&D?" than ":"")+(n&G?"a ":"")+(n&x?"one of the following: "+L(e,T):e)+(n&M?" of milliseconds":"")+".",a=typeof o===y&&typeof o.name===v&&"Error"===o.name.slice(-5);return new(a?o:r)(i)},V=function(t){return function(e,n,r){return R(t,e,E|n,r)}},X=(function(){var t="assign";return w[t]?c[t]:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(null==t)throw R("Target object",[d,m],x|S,o);for(var i,a=c(t),f=0,u=n.length;f<u;++f)if(null!=(i=n[f]))for(var l in i)c.prototype.hasOwnProperty.call(i,l)&&(a[l]=i[l]);return a}})(),q=(function(){var t="now";return w[t]?f[t]:function(){return(new f).getTime()}})(),B=(function(t){for(var e=[h,h.prototype],n=function(){return w.defineProperty},r=0,o=e.length;r<o;++r)e[r][t]=n;return n()})("supportsNativeGettersAndSetters"),H={getData:(function(t){return function(e){return this.get(e,t)}})({dataOnly:!0}),getMetadata:(function(t){return function(e){return this.get(e,t)}})({metadataOnly:!0}),isFull:function(){return B?this.size===this.capacity:this.getSize()===this.getCapacity()},isEmpty:function(){return 0===(B?this.size:this.getSize())}};X(h.prototype,H);var J="DataCache";typeof e===p&&typeof e.exports===p?e.exports=h:typeof n===y&&n.amd?n([J],[],h):t[J]=h})(null!=this.window?this.window:null!=this.global?this.global:this,this.module,this.define,Error,TypeError,RangeError,isNaN,Date,Math,Object,Array,Number);